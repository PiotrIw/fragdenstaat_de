{% load i18n %}
{% load static %}
{% load content_helper %}


<header id="header" class="header container d-flex justify-content-between pt-3 pt-md-4 pb-2">

  {% block nav_brand %}
  <div class="header__branding">
    <a href="/">
      {% block nav_brand_image %}<img src="{% static 'img/header_logo.svg' %}" class="header__logo" alt="">{% endblock %}
      <span class="sr-only sr-only-focusable">{% block nav_brand_name %}{{ SITE_NAME }}{% endblock %}</span>
    </a>
  </div>
  {% endblock %}

  <!-- Mobile menu -->
  <div class="mobile-menu d-flex align-items-stretch">
    <button type="button" class="mobile-menu__toggle">
      <i class="fa fa-bars" aria-hidden="true"></i>
    </button>
    <nav class="mobile-menu__wrapper mobile-menu__wrapper--inital">

      <!-- User menu -->
      {% if user.is_authenticated %}
      <ul class="list-unstyled mb-0">
        <li class="py-3 px-3 bg-blue-800 text-white">
          <span class="d-block text-truncate">{{user.get_full_name}}</span>
          <small class="d-block text-truncate">{{user.email}}</small>
        </li>
        <li><a role="button" class="d-block text-white bg-blue-800 font-weight-bold text-decoration-none py-3 px-3 border-bottom border-white" href="/account/requests">{% blocktrans %}Meine Anfragen{% endblocktrans %}</a></li>
        <li><a role="button" class="d-block text-white bg-blue-800 font-weight-bold text-decoration-none py-3 px-3 border-bottom border-white" href="/account/settings">{% blocktrans %}Einstellungen{% endblocktrans %}</a></li>
        <li><a role="button" class="d-block text-white bg-blue-800 font-weight-bold text-decoration-none py-3 px-3 border-bottom border-white" href="/spenden/spende/ihre-spenden">{% blocktrans %}Meine Spenden{% endblocktrans %}</a></li>
        <li>
          <form action="{% url 'account-logout' %}" method="post" class="form-inline">
            {% csrf_token %}
            <button type="submit" class="d-block text-white bg-blue-800 font-weight-bold text-decoration-none py-3 px-3 border-0 w-100 text-left">
              {% blocktrans %}Logout{% endblocktrans %}
            </button>
          </form>
        </li>
      </ul>
      {% endif %}

      <!-- Page Menu -->
      <ul class="list-unstyled mb-0">
        <li>
          <a role="button" class="d-flex py-3 px-3 text-body font-weight-bold text-decoration-none header-dropdown-trigger" href="/anfragen">
            <span class="mr-1">{% blocktrans %}Anfragen{% endblocktrans %}</span>
            <i class="fa fa-sort-down" aria-hidden="true"></i>
          </a>

          <!-- Anfragen header-dropdown -->
          <ul class="list-unstyled mb-0 px-4 header-dropdown-content">
            <li><a role="button" class="d-block py-3 text-body font-weight-bold text-decoration-none" href="/info/ueber/kampagnen">{% blocktrans %}Anfragen entdecken{% endblocktrans %}</a></li>
            <li><a role="button" class="d-block py-3 text-body font-weight-bold text-decoration-none" href="/info/ueber/kampagnen">{% blocktrans %}Anfrage stellen{% endblocktrans %}</a></li>
            <li><a role="button" class="d-block py-3 text-body font-weight-bold text-decoration-none" href="/info/ueber/kampagnen">{% blocktrans %}Einsteiger-Guide{% endblocktrans %}</a></li>
          </ul>
        </li>
        <li><a role="button" class="d-block text-body font-weight-bold text-decoration-none py-3 px-3" href="/info/ueber/kampagnen">{% blocktrans %}Kampagnen{% endblocktrans %}</a></li>
        <li><a role="button" class="d-block text-body font-weight-bold text-decoration-none py-3 px-3" href="/blog/kategorie/exklusiv">{% blocktrans %}Recherchen{% endblocktrans %}</a></li>
        {% if not user.is_authenticated %}
        <li>
          <a role="button" class="d-block text-body font-weight-bold text-decoration-none py-3 px-3" href="{% url 'account-login' %}">
            <i class="fa fa-sign-out" aria-hidden="true"></i>
            <span>{% blocktrans %}Sign in{% endblocktrans %}</span>
          </a>
        </li>
        {% endif %}
      </ul>

      <!-- Spenden CTA -->
      <p class="py-3 px-3">
        Ihnen gefällt unsere Arbeit? Unterstützen Sie uns mit einer Spende!<br>
        <a role="button" class="btn btn-outline-primary mt-2" href="/spenden">{% blocktrans %}Jetzt spenden{% endblocktrans %}</a>
      </p>
      
    </nav>
    <div class="mobile-menu__backdrop"></div>
  </div>

  <div class="collapse navbar-collapse" id="navbarNav">
    {% block nav %}
    <ul class="navbar-nav col-auto ml-auto">
      <li class="nav-item {% block nav_requests %}{% endblock %}">
        <a class="nav-link" href="{% url 'foirequest-list' %}">
          {% blocktrans %}Requests{% endblocktrans %}
        </a>
      </li>
      <li class="nav-item {% block nav_makerequest %}{% endblock %}">
        <a class="btn btn-primary" href="{% url 'foirequest-make_request' %}">
          {% blocktrans %}Make a Request!{% endblocktrans %}
        </a>
      </li>
    </ul>
    {% endblock nav %}

    <ul class="navbar-nav col-auto ml-auto">
      {% block nav_account_login %}
      {% if user.is_authenticated %}
      <li class="nav-item dropdown account-dropdown {% block nav_account %}{% endblock %}">
        <a class="nav-link dropdown-toggle account-dropdown-link" data-toggle="dropdown" href="#"
          aria-haspopup="true" aria-expanded="false" id="navbaraccount-link">
          <span class="d-none d-md-none d-lg-inline">
            {% blocktrans with name=user.first_name|truncatechars:12 %}
            Hello {{ name}}
            {% endblocktrans %}
          </span>
          <span class="d-lg-none fa fa-user-circle-o"></span>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbaraccount-link">
          {% include "account/menu.html" %}
          <div class="dropdown-divider"></div>
          <div class="dropdown-item">
            <form action="{% url 'account-logout' %}" method="post" class="form-inline text-center">
              {% csrf_token %}
              <button type="submit" class="btn btn-secondary">
                {% blocktrans %}Logout{% endblocktrans %}
              </button>
            </form>
          </div>
        </div>
      </li>
      {% else %}
      <li class="nav-item {% block nav_login %}{% endblock %}">
        <a class="nav-link" href="{% url 'account-login' %}">
          {% blocktrans %}Sign in{% endblocktrans %}
        </a>
      </li>
      {% endif %}
      {% endblock nav_account_login %}

      {% comment %} No language select {% endcomment %}
      {% block language_select %}{% endblock %}

    </ul>

  </div>
  <!--/.nav-collapse -->

</header>

